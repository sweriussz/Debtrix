<!doctype html>
<html lang="en">
<head>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data:; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;">
  <meta charset="utf-8" />
  <title>Debtrix</title>
  <link rel="stylesheet" href="style.css"> <script src="script.js" defer></script> 
</head>
<body>
    <div id="bg-season"></div>
    <div id="bg-char">
        <div class="char-hud">
            <div id="player-nick" style="display:none;"></div>
            <div id="char-log-container"></div>
        </div>
    </div>
    <div class="ui-vignette"></div>

    <!-- STATS MODAL -->
    <div id="stats-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <h2 class="neon-text">OPERATOR_PROFILE</h2>
            <div id="stats-data" style="margin: 20px 0; line-height: 2;"></div>
            <button class="btn-main" onclick="toggleStats()">CLOSE</button>
        </div>
    </div>

    <!-- TERMINAL MODAL (Trading & Analytics) -->
    <div id="terminal-modal" class="modal" style="display:none;">
        <div class="modal-content terminal-content">
            <div class="modal-header">
                <h2 class="neon-text">TERMINAL // MARKET_ACCESS</h2>
                <button class="close-btn" onclick="closeTerminal()">âœ•</button>
            </div>
            
            <div class="terminal-grid">
                <!-- Left: Chart & Market Data -->
                <div class="terminal-section">
                    <div class="section-header">MARKET ANALYSIS</div>
                    <div id="asset-selector">
                        <button class="asset-tab active" data-asset="ARASAKA">ARASAKA</button>
                        <button class="asset-tab" data-asset="BIOTECH">BIOTECH</button>
                        <button class="asset-tab" data-asset="NEON_COIN">NEON_COIN</button>
                        <button class="asset-tab" data-asset="CYBER_ETF">CYBER_ETF</button>
                    </div>
                    <canvas id="price-chart" width="500" height="250"></canvas>
                    <div id="chart-info">
                        <div class="info-row">
                            <span>Current Price:</span>
                            <span id="current-price" class="neon-blue">$0.00</span>
                        </div>
                        <div class="info-row">
                            <span>24h Change:</span>
                            <span id="price-change">0%</span>
                        </div>
                        <div class="info-row">
                            <span>Volatility:</span>
                            <span id="volatility">Low</span>
                        </div>
                    </div>
                </div>

                <!-- Right: Order Book & News -->
                <div class="terminal-section">
                    <div class="section-header">ORDER BOOK</div>
                    <div id="order-interface">
                        <input type="number" id="trade-amount" placeholder="Amount" min="1" value="1">
                        <div class="price-display">Price: <span id="trade-price">$0</span></div>
                        <div class="btn-row">
                            <button class="btn-buy" onclick="executeTrade('buy')">BUY</button>
                            <button class="btn-sell" onclick="executeTrade('sell')">SELL</button>
                        </div>
                    </div>
                    
                    <div class="section-header" style="margin-top: 20px;">PORTFOLIO</div>
                    <div id="portfolio-list"></div>
                    
                    <div class="section-header" style="margin-top: 20px;">NEWS FEED</div>
                    <div id="news-ticker"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- DEBT CORE MODAL (Banking & Credit) -->
    <div id="debt-modal" class="modal" style="display:none;">
        <div class="modal-content debt-content">
            <div class="modal-header">
                <h2 class="neon-text">DEBT CORE // CREDIT_SYSTEM</h2>
                <button class="close-btn" onclick="closeDebtCore()">âœ•</button>
            </div>
            
            <div class="debt-grid">
                <div class="debt-section">
                    <div class="section-header">CREDIT SCORE</div>
                    <div class="credit-score-display">
                        <div class="score-value" id="credit-score">750</div>
                        <div class="score-label">EXCELLENT</div>
                    </div>
                    
                    <div class="section-header" style="margin-top: 20px;">AVAILABLE CREDIT</div>
                    <div id="credit-offers"></div>
                </div>
                
                <div class="debt-section">
                    <div class="section-header">ACTIVE LOANS</div>
                    <div id="active-loans"></div>
                    
                    <div class="section-header" style="margin-top: 20px;">EMERGENCY FUND</div>
                    <div class="emergency-fund">
                        <div class="fund-balance">Balance: $<span id="emergency-balance">0</span></div>
                        <input type="number" id="emergency-deposit" placeholder="Deposit amount" min="0">
                        <button class="btn-main" onclick="depositEmergency()">DEPOSIT</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- LIFE OS MODAL (Budget & Lifestyle) -->
    <div id="life-modal" class="modal" style="display:none;">
        <div class="modal-content life-content">
            <div class="modal-header">
                <h2 class="neon-text">LIFE OS // LIFESTYLE_CONTROL</h2>
                <button class="close-btn" onclick="closeLifeOS()">âœ•</button>
            </div>
            
            <div class="life-grid">
                <div class="life-section">
                    <div class="section-header">EXPENSE MANAGER</div>
                    <div id="expense-controls"></div>
                    
                    <div class="section-header" style="margin-top: 20px;">SUBSCRIPTIONS</div>
                    <div id="subscription-list"></div>
                </div>
                
                <div class="life-section">
                    <div class="section-header">MONTHLY BUDGET</div>
                    <div id="budget-breakdown"></div>
                    
                    <div class="section-header" style="margin-top: 20px;">SAVINGS PLAN</div>
                    <div class="savings-controls">
                        <label>Auto-save %:</label>
                        <input type="range" id="savings-rate" min="0" max="50" value="10">
                        <span id="savings-display">10%</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ASSET MATRIX MODAL (Real Estate & Business) -->
    <div id="asset-modal" class="modal" style="display:none;">
        <div class="modal-content asset-content">
            <div class="modal-header">
                <h2 class="neon-text">ASSET MATRIX // WEALTH_BUILDER</h2>
                <button class="close-btn" onclick="closeAssetMatrix()">âœ•</button>
            </div>
            
            <div class="asset-grid">
                <div class="asset-section">
                    <div class="section-header">REAL ESTATE</div>
                    <div id="property-list"></div>
                    
                    <div class="section-header" style="margin-top: 20px;">AVAILABLE PROPERTIES</div>
                    <div id="property-market"></div>
                </div>
                
                <div class="asset-section">
                    <div class="section-header">BUSINESSES</div>
                    <div id="business-list"></div>
                    
                    <div class="section-header" style="margin-top: 20px;">INVESTMENT OPPORTUNITIES</div>
                    <div id="startup-market"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="app-wrapper">
        <header class="hud-row">
            <div class="stat-tile"><div class="label">Balance</div><div id="ui-money" class="value">$0</div></div>
            <div class="stat-tile"><div class="label">Intellect</div><div id="ui-int" class="value">0</div></div>
            <div class="stat-tile"><div class="label">Happiness</div><div id="ui-hap" class="value">0%</div></div>
            <div class="stat-tile"><div class="label">Moves</div><div id="ui-moves" class="value">3/3</div></div>
            <div class="stat-tile tier-display">
                <div class="label">Tier</div>
                <div id="ui-tier" class="value">Street Survivor</div>
            </div>
        </header>

        <!-- Challenge Display Widget -->
        <div id="challenge-widget" style="background: var(--panel); border: 1px solid var(--neon-purple); padding: 10px 15px; margin: 0 25px 15px 25px; display: none;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <div style="font-size: 10px; color: var(--neon-purple); text-transform: uppercase; letter-spacing: 1px;">ðŸŽ¯ CURRENT CHALLENGE</div>
                    <div id="challenge-name" style="font-size: 13px; color: var(--neon-blue); margin-top: 3px; font-weight: bold;">No active challenge</div>
                </div>
                <div id="challenge-goal" style="font-size: 11px; color: var(--text); text-align: right;">
                    Goal: ---
                </div>
            </div>
        </div>

        <main class="viewport">
            <aside class="side-controls">
                <button class="btn-main" id="workBtn">Work</button>
                <button class="btn-main" id="learnBtn">Study</button>
                <button class="btn-main" id="restBtn">Rest</button>
                <button class="btn-main" onclick="toggleStats()">STATS</button>
            </aside>
            
            <section></section>
        </main>

        <footer class="bottom-bar">
            <nav class="global-nav">
                <div class="nav-btn" id="nav-lifeos" onclick="openLifeOS()">LIFE OS</div>
                <div class="nav-btn" id="nav-debtcore" onclick="openDebtCore()">DEBT CORE</div>
                <div class="nav-btn locked" id="nav-terminal" onclick="openTerminal()">TERMINAL</div>
                <div class="nav-btn locked" id="nav-assets" onclick="openAssetMatrix()">ASSET MATRIX</div>
            </nav>
            <button class="btn-main btn-turn" id="nextTurnBtn">End the Period</button>
            <button class="btn-music" id="musicBtn" onclick="toggleMusic()" title="Toggle Music">ðŸŽµ</button>
        </footer>
    </div>

    <div id="mg-overlay" style="display:none;">
        <h2 id="mg-title">MINIGAME</h2>
        <p id="mg-desc" style="color: var(--neon-purple);"></p>
        <div id="mg-canvas"></div>
        <div id="mg-timer">03.00</div>
    </div>
</body>
</html>
